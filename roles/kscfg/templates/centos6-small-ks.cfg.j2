# Kickstart file automatically generated by anaconda.

#version=DEVEL
install
cdrom
lang ja_JP.UTF-8
keyboard jp106
network --onboot yes --device {{item.kscfg_netdev}} --bootproto static --ip {{item.kscfg_ip}} --netmask {{item.kscfg_netmask}} --gateway {{item.kscfg_gateway}} --noipv6 {% if item.kscfg_nameserver is defined %}--nameserver {{item.kscfg_nameserver}} {% endif %}--hostname {{item.kscfg_hostname}}
rootpw --iscrypted {{item.kscfg_rootpw}}
firewall --service=ssh
authconfig --enableshadow --passalgo=sha512
selinux --enforcing
timezone Asia/Tokyo
bootloader --location=mbr --driveorder=sda --append="crashkernel=auto rhgb quiet"
# The following is the partition information you requested
# Note that any partitions you deleted are not expressed
# here so unless you clear all partitions first, this is
# not guaranteed to work
#clearpart --none
zerombr
clearpart --all --initlabel --drives={{item.kscfg_hdddev}}

#part /boot --fstype=ext4 --asprimary --size=512
#part /dump --fstype=ext4 --asprimary --size=4096
#part swap --asprimary --size=4096
#part / --fstype=ext4 --grow --asprimary --size=1
part /boot --fstype=ext4 --ondisk={{item.kscfg_hdddev}} --size=512 --asprimary
part / --fstype=ext4 --ondisk={{item.kscfg_hdddev}} --size=1 --grow --asprimary
part swap --fstype=swap --ondisk={{item.kscfg_hdddev}} --size={{item.kscfg_memsize | int // 2}} --asprimary
{% if item.kscfg_kdump_part %}
part /dump --fstype=ext4 --ondisk={{item.kscfg_hdddev}} --size={{(item.kscfg_memsize | int * 1.1) | int}} --asprimary
{% endif %}

poweroff

%packages
@core
@japanese-support
@server-policy
@workstation-policy
{% for pkg in item.kscfg_pkg_addlist %}
{{pkg}}
{% endfor %}
%end